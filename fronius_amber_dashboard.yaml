views:
  - title: Fronius Monitor
    cards:
      - type: entities
        title: Manual Controls
        entities:
          - entity: input_boolean.fronius_manual_override
            name: ðŸš¨ MANUAL OVERRIDE
            secondary_info: last-changed
          - type: divider
          - entity: input_boolean.solar_curtailment_active
            name: Curtailment Status
        state_color: true
      - type: markdown
        title: âš ï¸ Override Instructions
        content: |-
          **Turn ON Manual Override to:**
          â€¢ Immediately restore Fronius to 8.2kW
          â€¢ Block all automatic curtailment
          â€¢ Emergency failsafe if automation misbehaves

          **Remember to turn OFF when issue is resolved!**
      - type: entities
        title: Current Status
        entities:
          - entity: sensor.inverter_pv_power
            name: Solar Production
          - entity: sensor.inverter_load_power
            name: House Load
          - entity: sensor.inverter_battery_level
            name: Battery Level
          - entity: sensor.smart_meter_63a_1_real_power
            name: Grid Flow  - Negative is Exporting
          - entity: sensor.grid_sell_price
            name: Grid Sell Price
      - type: markdown
        title: Live Calculation
        content: >-
          **Time:** {{ now().strftime('%H:%M:%S') }}

          **House Load:** {{ states('sensor.inverter_load_power') | int(0) }}W

          **Fronius Target:** {{ (states('sensor.inverter_load_power') | int(0)
          + 4500 + 500) }}W

          **Curtailment Allowed:** {% if now().hour < 16 and
          is_state('input_boolean.fronius_manual_override', 'off') %}âœ… YES{%
          else %}âŒ NO{% endif %}

          **Override Active:** {% if
          is_state('input_boolean.fronius_manual_override', 'on') %}ðŸš¨ YES{%
          else %}âœ… Normal{% endif %}
      - type: entities
        title: Automations Status
        entities:
          - entity: automation.mirror_export_limit_to_fronius_primo
            name: Main Curtailment
          - entity: automation.remove_fronius_curtailment_at_4pm
            name: 4pm Auto-Restore
          - entity: automation.reset_fronius_at_6am
            name: 6am Reset
          - entity: automation.fronius_manual_override_force_full_power
            name: Override Trigger
        state_color: true
      - type: history-graph
        title: Generation Limiting Effect - 24 Hours
        hours_to_show: 24
        entities:
          - entity: sensor.inverter_pv_power
            name: Solar Production
          - entity: sensor.smart_meter_63a_1_real_power
            name: Grid Flow
          - entity: sensor.grid_sell_price
            name: Grid Sell Price
          - entity: input_boolean.solar_curtailment_active
            name: Curtailment Active


